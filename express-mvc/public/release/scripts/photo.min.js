/* build date: 2016-04-13T19:05:52+0800 */ 
define("ajax",["globalConfig"],function(t){var e={zh_CN:{100:"未知错误",101:"被请求的页面需要用户名和密码",102:"请求未完成,服务器遇到不可预知的情况"},en_US:{100:"Unknown error",101:"The requested page needs a username and password",102:"The request was not completed, the server encounters unpredictable circumstances"}},i=e[t.context.lang||"zh_CN"],a={cache:!0,data:{},timeout:6e3,dataType:"json",type:"POST",contentType:"application/x-www-form-urlencoded",traditional:!1};return{invoke:function(t){var e=this,i=$.extend({},a,t||{}),n=$.ajax({url:i.url,contentType:i.contentType,type:i.type,cache:i.cache,data:i.data,timeout:i.timeout,dataType:i.dataType,beforeSend:i.beforeSend,complete:i.complete,traditional:i.traditional,success:function(t){e.success(i,t)},error:function(t){e.error(i,t)}});return n},success:function(t,e){var a=this,e=e||{};e.success||e.IsSuccess?"function"==typeof t.success&&t.success.apply(a,[e]):a.failed(t,e.msg||e.ErrorMessage||i[100])},error:function(t,e){var a=this,n=e.status+", "+e.statusText;switch(e.status){case 0:alert(n);break;case 401:alert(i[101]),location.href=location.href;break;case 500:alert(i[102]);break;default:"function"==typeof t.failed&&t.failed.apply(a,[{reason:n}])}},failed:function(t,e){var i=this;"function"==typeof t.failed&&t.failed.apply(i,[{reason:e}])}}});var Mustache;!function(t){"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define?define("mustache",t):Mustache=t}(function(){function t(t,e){return RegExp.prototype.test.call(t,e)}function e(e){return!t(m,e)}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(t){return String(t).replace(/[&<>"'\/]/g,function(t){return w[t]})}function n(t){this.string=t,this.tail=t,this.pos=0}function o(t,e){this.view=t,this.parent=e,this.clearCache()}function s(){this.clearCache()}function r(t){for(var e,i=t[3],a=i;(e=t[4])&&e.length;)t=e[e.length-1],a=t[3];return[i,a]}function l(t){function e(t,e,a){if(!i[t]){var n=l(e);i[t]=function(t,e){return n(t,e,a)}}return i[t]}var i={};return function(i,a,n){for(var o,s,l="",c=0,d=t.length;d>c;++c)switch(o=t[c],o[0]){case"#":s=n.slice.apply(n,r(o)),l+=i._section(o[1],a,s,e(c,o[4],n));break;case"^":l+=i._inverted(o[1],a,e(c,o[4],n));break;case">":l+=i._partial(o[1],a);break;case"&":l+=i._name(o[1],a);break;case"name":l+=i._escaped(o[1],a);break;case"text":l+=o[1]}return l}}function c(t){for(var e,i,a=[],n=a,o=[],s=0;s<t.length;++s)switch(e=t[s],e[0]){case"#":case"^":e[4]=[],o.push(e),n.push(e),n=e[4];break;case"/":if(0===o.length)throw new Error("Unopened section: "+e[1]);if(i=o.pop(),i[1]!==e[1])throw new Error("Unclosed section: "+i[1]);n=o.length>0?o[o.length-1][4]:a;break;default:n.push(e)}if(i=o.pop())throw new Error("Unclosed section: "+i[1]);return a}function d(t){for(var e,i,a=0;a<t.length;++a)e=t[a],i&&"text"===i[0]&&"text"===e[0]?(i[1]+=e[1],i[3]=e[3],t.splice(a--,1)):i=e}function u(t){if(2!==t.length)throw new Error("Invalid tags: "+t.join(" "));return[new RegExp(i(t[0])+"\\s*"),new RegExp("\\s*"+i(t[1]))]}var h={};h.name="mustache.js",h.version="0.7.0",h.tags=["{{","}}"],h.Scanner=n,h.Context=o,h.Writer=s;var p=/\s*/,f=/\s+/,m=/\S/,b=/\s*=/,v=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/,y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};h.escape=a,n.prototype.eos=function(){return""===this.tail},n.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},n.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return e},o.make=function(t){return t instanceof o?t:new o(t)},o.prototype.clearCache=function(){this._cache={}},o.prototype.push=function(t){return new o(t,this)},o.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."===t)e=this.view;else for(var i=this;i;){if(t.indexOf(".")>0){var a=t.split("."),n=0;for(e=i.view;e&&n<a.length;)e=e[a[n++]]}else e=i.view[t];if(null!=e)break;i=i.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(t,e){var i=this._cache[t];if(!i){var a=h.parse(t,e);i=this._cache[t]=this.compileTokens(a,t)}return i},s.prototype.compilePartial=function(t,e,i){var a=this.compile(e,i);return this._partialCache[t]=a,a},s.prototype.compileTokens=function(t,e){var i=l(t),a=this;return function(t,n){if(n)if("function"==typeof n)a._loadPartial=n;else for(var s in n)a.compilePartial(s,n[s]);return i(a,o.make(t),e)}},s.prototype.render=function(t,e,i){return this.compile(t)(e,i)},s.prototype._section=function(t,e,i,a){var n=e.lookup(t);switch(typeof n){case"object":if(y(n)){for(var o="",s=0,r=n.length;r>s;++s)o+=a(this,e.push(n[s]));return o}return n?a(this,e.push(n)):"";case"function":var l=this,c=function(t){return l.render(t,e)};return n.call(e.view,i,c)||"";default:if(n)return a(this,e)}return""},s.prototype._inverted=function(t,e,i){var a=e.lookup(t);return!a||y(a)&&0===a.length?i(this,e):""},s.prototype._partial=function(t,e){t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t));var i=this._partialCache[t];return i?i(e):""},s.prototype._name=function(t,e){var i=e.lookup(t);return"function"==typeof i&&(i=i.call(e.view)),null==i?"":String(i)},s.prototype._escaped=function(t,e){return h.escape(this._name(t,e))},h.parse=function(t,a){function o(){if(_&&!T)for(;k.length;)x.splice(k.pop(),1);else k=[];_=!1,T=!1}a=a||h.tags;for(var s,r,l,m,y=u(a),w=new n(t),x=[],k=[],_=!1,T=!1;!w.eos();){if(s=w.pos,l=w.scanUntil(y[0]))for(var C=0,I=l.length;I>C;++C)m=l.charAt(C),e(m)?k.push(x.length):T=!0,x.push(["text",m,s,s+1]),s+=1,"\n"===m&&o();if(s=w.pos,!w.scan(y[0]))break;if(_=!0,r=w.scan(g)||"name",w.scan(p),"="===r)l=w.scanUntil(b),w.scan(b),w.scanUntil(y[1]);else if("{"===r){var S=new RegExp("\\s*"+i("}"+a[1]));l=w.scanUntil(S),w.scan(v),w.scanUntil(y[1]),r="&"}else l=w.scanUntil(y[1]);if(!w.scan(y[1]))throw new Error("Unclosed tag at "+w.pos);x.push([r,l,s,w.pos]),("name"===r||"{"===r||"&"===r)&&(T=!0),"="===r&&(a=l.split(f),y=u(a))}return d(x),c(x)};var x=new s;return h.clearCache=function(){return x.clearCache()},h.compile=function(t,e){return x.compile(t,e)},h.compilePartial=function(t,e,i){return x.compilePartial(t,e,i)},h.compileTokens=function(t,e){return x.compileTokens(t,e)},h.render=function(t,e,i){return x.render(t,e,i)},h.to_html=function(t,e,i,a){var n=h.render(t,e,i);return"function"!=typeof a?n:void a(n)},h}()),define("paging",["ajax","mustache","jquery"],function(t,e){var i={paging:"paging",pagingTemplate:"paging_template",callbacks:{fireLoad:null}},a=function(t){this.opts=$.extend({},i,t),this.init(t)};return a.prototype={init:function(){var t=this;t.buildDom(),t.bindEvent()},buildDom:function(){var t=this;t.$paging=$("#"+t.opts.paging),t.template=$("#"+t.opts.pagingTemplate).html(),t.curIdx=1,t.pageCount=0},bindEvent:function(){var t=this;t.$paging.on("click","ul>li>a",function(e){var i=$(this).attr("data-action");t.load($(this),i)}),t.$paging.on("click","[data-action='redirect_page']",function(e){t.redirectByNum()}),t.$paging.on("keyup","[data-field='page_num']",function(e){13==e.keyCode&&t.redirectByNum()}),t.$paging.on("focus blur","[data-field='page_num']",function(e){"focusin"===e.type?$.trim($(this).val())&&t.validateNum():$(this).popover("hide")})},render:function(t){var i,a=this,n=t.total,o=a.opts.limitList;if(pageCount=0,pageNums=[],n&&(pageCount=Math.floor(n/a.opts.limit),t.total%a.opts.limit>0&&(pageCount+=1)),o){var s=Math.floor(o/2),r=pageCount,l=1;for(s+a.curIdx<pageCount&&(r=s+a.curIdx),a.curIdx-s>1&&(l=a.curIdx-s);o-1>r-l;)if(r<pageCount)r++;else{if(!(r==pageCount&&l>1))break;l--}for(;r>=l;l++)pageNums.push({cls:a.curIdx==l?"active":"",idx:l})}t.PageCount=a.pageCount=pageCount,t.PageNums=pageNums,i=e.render(a.template,{Paging:t}),a.$paging.html(i)},load:function(t,e){var i=this,a=i.curIdx;if("prev"===e){if(a--,1>a)return}else if("next"===e){if(a++,a>i.pageCount)return}else"paging"===e&&(a=parseInt(t.html()));i.curIdx=a,i.fireLoad()},reload:function(t){var e=this;e.curIdx=parseInt(t)||1,e.fireLoad()},fireLoad:function(){var t=this;"function"===$.type(t.opts.callbacks.fireLoad)&&t.opts.callbacks.fireLoad.call(t,{limit:t.opts.limit,pageIndex:t.curIdx})},redirectByNum:function(){var t=this,e=t.validateNum();e.flag&&t.reload(e.curIdx)},validateNum:function(){var t=this,e=t.$paging.find("[data-field='page_num']"),i=$.trim(e.val()),a=!0;return i&&/^[1-9][0-9]*$/.test(i)?t.pageCount&&(1>i||i>t.pageCount)&&(a=!1):a=!1,!a&&e.popover("show"),{flag:a,curIdx:i}}},a}),function(){"use strict";function t(t){function e(e,a){var o,b,v=e==window,g=a&&void 0!==a.message?a.message:void 0;if(a=t.extend({},t.blockUI.defaults,a||{}),!a.ignoreIfBlocked||!t(e).data("blockUI.isBlocked")){if(a.overlayCSS=t.extend({},t.blockUI.defaults.overlayCSS,a.overlayCSS||{}),o=t.extend({},t.blockUI.defaults.css,a.css||{}),a.onOverlayClick&&(a.overlayCSS.cursor="pointer"),b=t.extend({},t.blockUI.defaults.themedCSS,a.themedCSS||{}),g=void 0===g?a.message:g,v&&f&&i(window,{fadeOut:0}),g&&"string"!=typeof g&&(g.parentNode||g.jquery)){var y=g.jquery?g[0]:g,w={};t(e).data("blockUI.history",w),w.el=y,w.parent=y.parentNode,w.display=y.style.display,w.position=y.style.position,w.parent&&w.parent.removeChild(y)}t(e).data("blockUI.onUnblock",a.onUnblock);var x,k,_,T,C=a.baseZ;x=t(u||a.forceIframe?'<iframe class="blockUI" style="z-index:'+C++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+a.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),k=t(a.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+C++ +';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+C++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),a.theme&&v?(T='<div class="blockUI '+a.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(C+10)+';display:none;position:fixed">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):a.theme?(T='<div class="blockUI '+a.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(C+10)+';display:none;position:absolute">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):T=v?'<div class="blockUI '+a.blockMsgClass+' blockPage" style="z-index:'+(C+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+a.blockMsgClass+' blockElement" style="z-index:'+(C+10)+';display:none;position:absolute"></div>',_=t(T),g&&(a.theme?(_.css(b),_.addClass("ui-widget-content")):_.css(o)),a.theme||k.css(a.overlayCSS),k.css("position",v?"fixed":"absolute"),(u||a.forceIframe)&&x.css("opacity",0);var I=[x,k,_],S=t(v?"body":e);t.each(I,function(){this.appendTo(S)}),a.theme&&a.draggable&&t.fn.draggable&&_.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var $=p&&(!t.support.boxModel||t("object,embed",v?null:e).length>0);if(h||$){if(v&&a.allowBodyStretch&&t.support.boxModel&&t("html,body").css("height","100%"),(h||!t.support.boxModel)&&!v)var A=l(e,"borderTopWidth"),E=l(e,"borderLeftWidth"),P=A?"(0 - "+A+")":0,U=E?"(0 - "+E+")":0;t.each(I,function(t,e){var i=e[0].style;if(i.position="absolute",2>t)v?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+a.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),v?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),U&&i.setExpression("left",U),P&&i.setExpression("top",P);else if(a.centerY)v&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0;else if(!a.centerY&&v){var n=a.css&&a.css.top?parseInt(a.css.top,10):0,o="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"';i.setExpression("top",o)}})}if(g&&(a.theme?_.find(".ui-widget-content").append(g):_.append(g),(g.jquery||g.nodeType)&&t(g).show()),(u||a.forceIframe)&&a.showOverlay&&x.show(),a.fadeIn){var D=a.onBlock?a.onBlock:d,j=a.showOverlay&&!g?D:d,M=g?D:d;a.showOverlay&&k._fadeIn(a.fadeIn,j),g&&_._fadeIn(a.fadeIn,M)}else a.showOverlay&&k.show(),g&&_.show(),a.onBlock&&a.onBlock();if(n(1,e,a),v?(f=_[0],m=t(a.focusableElements,f),a.focusInput&&setTimeout(s,20)):r(_[0],a.centerX,a.centerY),a.timeout){var L=setTimeout(function(){v?t.unblockUI(a):t(e).unblock(a)},a.timeout);t(e).data("blockUI.timeout",L)}if(g&&"string"!=typeof g&&(g.parentNode||g.jquery)){var N=!0,F=t._data(g[0],"events");t(window).resize(function(){t(document).off("mouseleave.move")}),(!F||!F.mousedown)&&g.mousedown(function(e){var i=t(e.target),a=t._data(e.target,"events");if(t.isEmptyObject(a)||!a.click){t("div[id^='ui-datepicker']").hide();var n=i.closest("[data-action='drag']").size();i.prop("tagName");n&&(c(e,this),N=!0,e.preventDefault(),e.stopPropagation())}}),g.find("div,table,ul,span").scroll(function(e){N&&t(document).off("mousemove.move mouseup.move"),N=!1,e.preventDefault()})}}}function i(e,i){var o,s=e==window,r=t(e),l=r.data("blockUI.history"),c=r.data("blockUI.timeout");c&&(clearTimeout(c),r.removeData("blockUI.timeout")),i=t.extend({},t.blockUI.defaults,i||{}),n(0,e,i),null===i.onUnblock&&(i.onUnblock=r.data("blockUI.onUnblock"),r.removeData("blockUI.onUnblock"));var d;d=s?t("body").children().filter(".blockUI").add("body > .blockUI"):r.find(">.blockUI"),i.cursorReset&&(d.length>1&&(d[1].style.cursor=i.cursorReset),d.length>2&&(d[2].style.cursor=i.cursorReset)),s&&(f=m=null),i.fadeOut?(o=d.length,d.stop().fadeOut(i.fadeOut,function(){0===--o&&a(d,l,i,e)})):a(d,l,i,e)}function a(e,i,a,n){var o=t(n);if(!o.data("blockUI.isBlocked")){e.each(function(t,e){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),o.removeData("blockUI.history")),o.data("blockUI.static")&&o.css("position","static"),"function"==typeof a.onUnblock&&a.onUnblock(n,a);var s=t(document.body),r=s.width(),l=s[0].style.width;s.width(r-1).width(r),s[0].style.width=l}}function n(e,i,a){var n=i==window,s=t(i);if((e||(!n||f)&&(n||s.data("blockUI.isBlocked")))&&(s.data("blockUI.isBlocked",e),n&&a.bindEvents&&(!e||a.showOverlay))){var r="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";e?t(document).bind(r,a,o):t(document).unbind(r,o)}}function o(e){if("keydown"===e.type&&e.keyCode&&9==e.keyCode&&f&&e.data.constrainTabKey){var i=m,a=!e.shiftKey&&e.target===i[i.length-1],n=e.shiftKey&&e.target===i[0];if(a||n)return setTimeout(function(){s(n)},10),!1}var o=e.data,r=t(e.target);return r.hasClass("blockOverlay")&&o.onOverlayClick&&o.onOverlayClick(e),r.parents("div."+o.blockMsgClass).length>0?!0:0===r.parents().children().filter("div.blockUI").length}function s(t){if(m){var e=m[t===!0?m.length-1:0];e&&e.focus()}}function r(t,e,i){var a=t.parentNode,n=t.style,o=(a.offsetWidth-t.offsetWidth)/2-l(a,"borderLeftWidth"),s=(a.offsetHeight-t.offsetHeight)/2-l(a,"borderTopWidth");e&&(n.left=o>0?o+"px":"0"),i&&(n.top=s>0?s+"px":"0")}function l(e,i){return parseInt(t.css(e,i),10)||0}function c(e,i){var a=t(i).parents(".blockUI").eq(0),n=t(window).height(),o=t(window).width(),s=a.children("div").first().width(),r=a.children("div").first().height(),l=n-r,c=o-s,d=e.pageX,u=e.pageY,h=a.offset().left,p=a.offset().top,f=t(document).scrollLeft(),m=t(document).scrollTop(),b=t("<div></div>"),v=h-f,g=p-m,y=0,w=0,x=5,k=5,_=a.parents(".blockUI").eq(0),T=_.size();b.appendTo("body").css({backgroundColor:"#F1F1F1","border-radius":"4px",position:"fixed",cursor:"move",width:s,height:r,top:g,left:v,opacity:"0.5",zIndex:"9999"}),a.css({top:99999,left:99999}),T&&(o=_.width(),n=_.height(),h-=_.offset().left,p-=_.offset().top,y=_.offset().left-f,w=_.offset().top-m,v=h,g=p,l=n-r,c=o-s),t(document).on({"mousemove.move":function(t){var e=h+t.pageX-d+y,i=p+t.pageY-u+w;T||(e-=f,i-=m),y>=e?e=y+k:s>o-e+y&&(e=c+y-k),w>i?i=w+x:r>n-i+w&&(i=l+w-x?l+w-x:x),b.css({left:e+"px",top:i+"px"}),v=T?e-y:e,g=T?i-w:i,t.preventDefault(),t.stopPropagation()},"mouseup.move":function(e){b.remove(),a.css({left:v+"px",top:g+"px"}),t(document).off("mousemove.move mouseup.move"),e.preventDefault(),e.stopPropagation()},"mouseleave.move":function(e){b.remove(),a.css({left:v+"px",top:g+"px"}),t(document).off("mousemove.move mouseup.move"),e.preventDefault(),e.stopPropagation()}})}t.fn._fadeIn=t.fn.fadeIn;var d=t.noop||function(){},u=/MSIE/.test(navigator.userAgent),h=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=(document.documentMode||0,t.isFunction(document.createElement("div").style.setExpression));t.blockUI=function(t){e(window,t)},t.unblockUI=function(t){i(window,t)},t.growlUI=function(e,i,a,n){var o=t('<div class="growlUI"></div>');e&&o.append("<h1>"+e+"</h1>"),i&&o.append("<h2>"+i+"</h2>"),void 0===a&&(a=3e3);var s=function(e){e=e||{},t.blockUI({message:o,fadeIn:"undefined"!=typeof e.fadeIn?e.fadeIn:700,fadeOut:"undefined"!=typeof e.fadeOut?e.fadeOut:1e3,timeout:"undefined"!=typeof e.timeout?e.timeout:a,centerY:!1,showOverlay:!1,onUnblock:n,css:t.blockUI.defaults.growlCSS})};s();o.css("opacity");o.mouseover(function(){s({fadeIn:0,timeout:3e4});var e=t(".blockMsg");e.stop(),e.fadeTo(300,1)}).mouseout(function(){t(".blockMsg").fadeOut(1e3)})},t.fn.block=function(i){if(this[0]===window)return t.blockUI(i),this;var a=t.extend({},t.blockUI.defaults,i||{});return this.each(function(){var e=t(this);a.ignoreIfBlocked&&e.data("blockUI.isBlocked")||e.unblock({fadeOut:0})}),this.each(function(){"static"==t.css(this,"position")&&(this.style.position="relative",t(this).data("blockUI.static",!0)),this.style.zoom=1,e(this,i)})},t.fn.unblock=function(e){return this[0]===window?(t.unblockUI(e),this):this.each(function(){i(this,e)})},t.blockUI.version=2.66,t.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"default"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.2,cursor:"default"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.5,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var f=null,m=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define("blockUI",["jquery"],t):t(jQuery)}(),function(t){t.fn.extend({realVal:function(){var t=(this.attr("type")||"").toUpperCase(),e=this.prop("tagName").toUpperCase();return"INPUT"!==e||"CHECKBOX"!==t&&"RADIO"!==t?this.attr("data-value")?this.attr("data-value"):this.val():this.prop("checked")},getVal:function(){var t,e=this.prop("tagName").toUpperCase();if("SELECT"===e)return this.val();if("SPAN"===e||"LABEL"===e)return this.text();if("INPUT"===e){if(t=this.attr("type").toUpperCase(),"TEXT"===t||"HIDDEN"===t)return this.val();if("CHECKBOX"===t||"RADIO"===t)return this.prop("checked")}return"TEXTAREA"===e?this.val():void 0},setVal:function(e){var i,a=this.prop("tagName").toUpperCase();if("SELECT"===a&&this.val(e),("SPAN"===a||"LABEL"===a)&&this.text(e),"INPUT"===a){if(i=this.attr("type").toUpperCase(),"TEXT"===i||"HIDDEN"===i)return this.val(e);"CHECKBOX"===i&&t.inArray(parseInt(this.val()),e)>-1&&this.attr("checked",!0)}return"TEXTAREA"===a?this.val(e):void 0},clearVal:function(){var t,e=this.prop("tagName").toUpperCase();if("SELECT"===e&&(this.get(0).selectedIndex=0),("SPAN"===e||"LABEL"===e)&&this.text(""),"INPUT"===e){if(t=this.attr("type").toUpperCase(),"TEXT"===t||"HIDDEN"===t)return this.val("");("CHECKBOX"===t||"RADIO"===t)&&this.attr("checked",!1)}return"TEXTAREA"===e?this.val(""):void 0},building:function(e){var i,a,n=this,o={};o[e.text]="text",o[e.value]="value",n.on("change",function(){i=t(this).getVal(),a=t.mappingJSON(e.data[i]||[],o,[]),e.el.bindSelectOption(a),"function"==typeof e.changed&&e.changed.apply(this,[i])})},bindSelectOption:function(e){var i=this;return i.find("option").remove(),t.each(e,function(e,a){t("<option/>").appendTo(i).prop({text:a.text,value:a.value})}),i.get(0).selectedIndex=0,this},loadAppointScope:function(e){this.find("input,select,a,span,div,textarea,img").each(function(i,a){var n,o=t(a).attr("data-field");if(void 0!=o){var s=a.tagName.toUpperCase();if("INPUT"==s)switch(n=t(a).attr("type")){case"text":t(a).val(e[o]);break;case"checkbox":t(a).prop("checked",e[o]);break;case"hidden":t(a).val(e[o])}else"SELECT"==s?t(a).val(e[o]):"A"==s?t(a).text(e[o]):"DIV"==s||"SPAN"==a.tagName?t(a).html(e[o]):"TEXTAREA"==s?t(a).text(e[o]):"IMG"==s&&t(a).attr("src",e[o])}})},selectedAllAppointScope:function(){var e={};return this.find("input,select,a,span,div,textarea,img").each(function(i,a){var n,o=t(a),s=t(a).attr("data-field");if(void 0!=s){var r=o.html(),l=o.val();"true"==r&&(r=!0),"false"==r&&(r=!1),"true"==l&&(l=!0),"false"==l&&(l=!1);var c=a.tagName.toUpperCase();if("INPUT"==c)switch(n=o.attr("type")){case"text":e[s]=l;break;case"checkbox":e[s]=o.is(":checked");break;case"hidden":e[s]=l}else"SELECT"==c?0==o.val().length?e[s]="":e[s]=l:"A"==c?e[s]=r:"DIV"==c||"SPAN"==c?e[s]=r:"TEXTAREA"==c?e[s]=l||o.text():"IMG"==c&&(e[s]=o.attr("src"))}}),e},clearAllAppointScope:function(){return this.find("input,select,a,span,div,textarea,img").each(function(e,i){var a,n=t(i),o=n.attr("data-field");if(void 0!=o){var s=i.tagName.toUpperCase();if("INPUT"==s)switch(a=n.attr("type")){case"text":case"hidden":n.val("");break;case"checkbox":n.prop("checked",!1);break;default:n.val("")}else"SELECT"==s?n.val(""):"DIV"==s?n.html(""):"SPAN"==s?n.html(""):"TEXTAREA"==s?n.text("").val(""):"IMG"==s&&n.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==")}})},adaptive:function(e){return this.each?this.each(function(i,a){var n=t(a),o=new Image,s=n.parent().width()||n.width(),r=n.parent().height()||n.height();o.src=n.attr("src"),t(o).load(function(){var i=o.width,l=o.height,c=s/i,d=r/l,u=1;if(e.isAdaptive){if(0==s&&0==r?u=1:0==s?1>d&&(u=d):0==r?1>c&&(u=c):(1>c||1>d)&&(u=d>=c?c:d),1>u&&(i*=u,l*=u),t(a).width(i||s),t(a).height(l||r),t(a).parent()){var h=(t(a).parent().width()-t(a).width())/2,p=(t(a).parent().height()-t(a).height())/2;"static"==t(a).css("position")?t(a).css({marginLeft:h,marginTop:p}):t(a).css({left:h,top:p})}"function"==typeof e.callback.success&&e.callback.success.apply(this,[n])}}).error(function(){"function"==typeof e.callback.error&&e.callback.error.apply(this,[n])})}):void 0},initPlaceholder:function(e){var i={lfdistance:10};i=t.extend({},i,e),"placeholder"in document.createElement("input")||this.each(function(e,a){var n,o,s=t(this),r=s.attr("placeholder"),l=null;if(r){if(n=s.attr("id"),!n){var c=new Date;n="lbl_placeholder"+c.getSeconds()+c.getMilliseconds(),s.attr("id",n)}o=t("<label>",{html:s.val()?"":r,"for":n,css:{position:"absolute",left:s.position().left+i.lfdistance,top:s.position().top,height:s.outerHeight(!0),lineHeight:s.outerHeight(!0)+"px",color:"#C3C3C3",cursor:"text"}}).insertAfter(s),l=function(t){s.val()?o.html(""):o.html(r)},s.on("focus blur input keyup propertychange",l),l()}})},waterfall:function(e){var i,e=t.extend(!0,{isAdaptiveWidth:!0},e),a=this.outerWidth(!0),n=this.find(".col-for-rowpanel"),o=n.outerWidth(!0),s=Math.ceil(a/o),r=[];t.each(n,function(a){var n=t(this),l=a%s,c=n.outerHeight(!0);if(i=Math.floor(a/s),!e.isAdaptiveWidth&&n.css({width:o}),i){var d=Math.min.apply(r,r),u=r.indexOf(d);n.animate({top:d,left:o*u}),r[u]=d+c}else n.animate({top:"0",left:o*l}),r.push(c)});var l=r.sort(function(t,e){return e>t?t:-1});n.parent().css("height",l[0])}}),t.extend({mappingJSON:function(e,i,a){for(var n=0;n<e.length;n++){var o={},s=e[n];for(var r in s){var l=i[r]||r;"array"===t.type(s[r])&&s[r].length>0?(o[l]=[],this.mappingJSON(s[r],i,o[l])):o[l]=s[r]}a.push(o)}return a},escapeSpecialChars:function(t){return t.replace(/[\\]/g,"\\\\")},isInteger:function(t){return/^[1-9]*[1-9][0-9]*$/.test(t)},isFloat:function(t,e){e=e||"1";var i="^-?\\d+(\\.\\d{1,"+e+"})$";return new RegExp(i).test(t)},getParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+t+"=([^&#]*)",i=new RegExp(e),a=i.exec(window.location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},downloadFileByUrl:function(e){var i="frameId_download_"+(new Date).getTime(),a=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",n=t('<iframe name="'+i+'" id="'+i+'" src="'+a+'" style="display:none;"></iframe>'),o='<form action="'+e+'" method="POST" target="'+i+'"></form>',s=t(o);t("body").append(n);var r=n.get(0).contentDocument||n.get(0).contentWindow.document;r.open();try{r.appendChild(s.get(0))}catch(l){o=r.createElement(o),r.appendChild(o)}r.close(),n.on("load",function(){alert("file download error"),n.remove()}),t(r).find("form").submit(),window.setTimeout(function(){n.remove()},2e3)},isExistScroll:function(e,i){var a=t("<div></div>"),n=e.outerWidth(!0)-e.find("table:first").outerWidth(!0),o=i.outerWidth(!0),s=(o-n)/o*100,r="100%",l="none";n?(r=s+"%",l="left",i.append(a.css({width:n,height:1,"float":l}))):i.find(a).remove(),i.find("table:first").css({width:r,"float":l})},redirectLink:function(e,i,a,n,o){var s=new RegExp("[?&]"+a+"=([^&]*)","i"),r=new RegExp("([?&])"+a+"=([^&]*)(&?)","i"),l=/\?/.test(e),n=n||",",c="";return void 0==i?e:(c="array"==t.type(i)?i.join(","):i,e=s.test(e)?e.replace(r,function(t,e,s,r){var l=s+n,d=e+a,u=function(){return"&"==e?r:r?"?":""};if(o){var h=c?d+"="+c+r:u();return h}if(","==n){for(var p=s.split(","),f=c.split(","),m="",b=0;b<p.length;b++){m=p[b];for(var v=0;v<f.length;v++)m==f[v]&&p.splice(b,1)}return s=p.join(","),l=s?s+n:"",c||c.length?d+"="+l+i+r:u()}return d+"="+i+r}):l?e+"&"+a+"="+c:e+"?"+a+"="+c)},moveBox:function(e){function i(e){var i;t(document).on({"mousemove.online":function(t){i=t.pageY-o,0>i&&(i=0),i>s&&(i=s),e.css("top",i)},"mouseup.online":function(){t(document).off(".online")}})}var a=t("#"+e);if(a.size()){var n=(a.width(),a.height()),o=0,s=t(window).height()-n;a.on("mousedown",function(e){o=e.pageY-t(this).offset().top,i(t(this)),e.preventDefault()})}},moveTips:function(e,i,a,n){function o(e,i,n){var o=t(e),s=o.position(),r=a.height()/2,c=o.offsetParent(),d=s.top-r+c.scrollTop(),u=s.left+o.width(),h=c.width(),p=a.outerWidth(!0);n&&n.isTitle?(d=d+o.height()+r,u=u-o.width()+50,l.hide(),a.addClass("move-tip-append")):(d+=o.height()/2,a.removeClass("move-tip-append"),l.show()),p>h-u&&(u=h-p),p>h&&a.width(h-50),a.animate({left:u,top:d},function(){n&&n.callback&&n.callback.afterStopMove&&n.callback.afterStopMove.apply(null,[o])}).show()}var s=null,r=null,l=a.find(".tip-arrow");e.on("mouseenter mouseleave",i,function(e){var i=e.type,l=this,c=e;t(l).removeProp("title").removeAttr("title"),"mouseenter"===i?(window.clearTimeout(r),t(l).append(a),s=window.setTimeout(function(){var e=t(l).attr("data-content");return e?(a.find("[data-field='content']").html(e),void o(l,c,n)):(window.clearTimeout(s),void a.hide())},500)):(window.clearTimeout(s),r=window.setTimeout(function(){a.hide()},800)),e.stopPropagation()}),a.on("mouseenter",function(t){window.clearTimeout(r),t.stopPropagation()})},messageAlert:function(e){var i=t("#modal_alert");i.modal({backdrop:"static"}).find("[data-field='tip_info']").html(e)},messageConfirm:function(e,i){var a=t("#modal_custom_confirm");a.modal({backdrop:"static"}).find("[data-field='tip_info']").html(e),a.find("[data-field='sure']").click(function(){("function"!=typeof i||i.call(a)!==!1)&&a.modal("hide")})},initBlockMsg:function(e){for(var i=t("<div class='loading'><p class='text-center'>Loading...</p></div>"),a=[],n=1;12>=n;n++){var o='<div class="loading-c-'+n+' loading-child"></div>';a.push(o)}return i.append(a.join("")),i},debounce:function(t,e,i){var a;return function(){var n=this,o=arguments,s=function(){a=null,i||t.call(n,o)},r=i&&!a;clearTimeout(a),a=setTimeout(s,e),r&&t.call(n,o)}},dataBase64Img:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",uniqueArr:function(t){var e,i=[],a=1,n=0;for(t.sort(function(t,e){return t-e});e=t[a];a++)e===t[a-1]&&(n=i.push(a));for(;n--;)t.splice(i[n],1)}})}(jQuery),function(t){function e(t){t=t.replace(/left|top/g,"0px"),t=t.replace(/center/g,"50%"),t=t.replace(/right|bottom/g,"100%"),t=t.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var e=t.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(e[1],10),e[2],parseFloat(e[3],10),e[4]]}var i=t.css;t.css=function(t,e,a){if("background-position"===e&&(e="backgroundPosition"),"backgroundPosition"!==e||!t.currentStyle||t.currentStyle[e])return i.apply(this,arguments);var n=t.style;return!a&&n&&n[e]?n[e]:i(t,"backgroundPositionX",a)+" "+i(t,"backgroundPositionY",a)};var a=t.fn.animate;t.fn.animate=function(t){return"background-position"in t&&(t.backgroundPosition=t["background-position"],delete t["background-position"]),"backgroundPosition"in t&&(t.backgroundPosition="("+t.backgroundPosition+")"),a.apply(this,arguments)},t.fx.step.backgroundPosition=function(i){if(!i.bgPosReady){var a=t.css(i.elem,"backgroundPosition");a||(a="0px 0px"),a=e(a),i.start=[a[0],a[2]];var n=e(i.end);i.end=[n[0],n[2]],i.unit=[n[1],n[3]],i.bgPosReady=!0}var o=[];o[0]=(i.end[0]-i.start[0])*i.pos+i.start[0]+i.unit[0],o[1]=(i.end[1]-i.start[1])*i.pos+i.start[1]+i.unit[1],i.elem.style.backgroundPosition=o[0]+" "+o[1]}}(jQuery),window.console.prototype={log:function(t){console.log&&console.log(t)}},define("jqExtend",["jquery"],function(){}),define("grid",["paging","ajax","mustache","blockUI","jqExtend","jquery"],function(t,e,i){var a={gridPanel:"gridPanel",filter:"filterId",grid:"grid",gBody:"gridBodyId",template:"template",limitList:10,limit:10,callbacks:{beforeSend:null,beforeRender:null,afterRender:null,complete:null,operatorError:null,beforeModalShown:null,afterModalHidden:null},searchUrl:"",paging:"paging",pagingTemplate:"paging_template",urls:{read:"",update:"",destroy:"",create:""},operator:{addBtn:"user_add"},modalConfirm:"modal_confirm",modalAlert:"modal_alert"},n=function(t){this.opts=$.extend({},a,t),this.init()};return n.prototype={init:function(){var t=this;t.buildDom(),t.bindEvent(),t.initComponent()},buildDom:function(){var t=this;t.$gridPanel=$("#"+t.opts.gridPanel),t.$grid=$("#"+t.opts.grid),t.$filter=$("#"+t.opts.filter),t.$gBody=$("#"+t.opts.gBody),t.template=$("#"+t.opts.template).html(),t.$edit=$("#"+t.opts.edit),t.paging=null,t.createUser=t.$grid.attr("data-read-url")||t.opts.urls.create,t.updateUser=t.$grid.attr("data-update-url")||t.opts.urls.update,t.$addBtn=$("#"+t.opts.operator.addBtn),t.$modalConfirm=$("#"+t.opts.modalConfirm),
t.$modalAlert=$("#"+t.opts.modalAlert),t.$blockMsg=$.initBlockMsg(),t.data=[]},bindEvent:function(){var t=this;t.$filter.on("click","[data-action]",function(e){var i=$(this).attr("data-action");"search"===i?t.reload():"clear"===i&&t.$filter.loadAppointScope({})}),t.$filter.on("keyup","[data-field]",function(e){13===e.keyCode&&t.reload()}),t.$grid.on("click","[data-field='update'],[data-field='del']",function(){var e=$(this).attr("data-field"),i=$(this).closest("tr").attr("data-val");switch(i&&(i=JSON.parse(i)),e){case"update":t.$edit.prop("model",{name:"update",ids:i}).modal({backdrop:!0,keyboard:!0,show:!0});break;case"del":t.$modalConfirm.data("ids",i).modal({backdrop:"static"}).find("[data-field='tip_info']").html("Confirm delete the record?")}}),t.$grid.on("click","tbody tr",function(){t.toggleActive($(this))}),t.$edit.on("click","[data-field='save']",function(){t.save()}),t.$edit.on("shown.bs.modal",function(e){var i,a=$(this).prop("model");if("update"===a.name){if($.isEmptyObject(a.ids))return t.log("未设置更新参数！");console.log(a.ids),i=t.findDataByIds(a.ids),t.$edit.loadAppointScope(i)}"function"===$.type(t.opts.callbacks.beforeModalShown)&&t.opts.callbacks.beforeModalShown.call(t,t,a.name,i)}),t.$edit.on("hidden.bs.modal",function(){t.$edit.clearAllAppointScope(),"function"===$.type(t.opts.callbacks.afterModalHidden)&&t.opts.callbacks.afterModalHidden.call(t,t)}),t.$modalConfirm.on("click","[data-field='sure']",function(){t.destroy()}),t.$addBtn.on("click",function(){t.$edit.prop("model",{name:"create"}).modal("show")})},findDataByIds:function(t){for(var e,i,a=this,n=0,o=a.data.data,s=o.length;s>n;n++){i=!0;for(e in t)o[n][e]!=t[e]&&(i=!1);if(i)return o[n]}return{}},initComponent:function(){var e=this;e.paging=new t({paging:e.opts.paging,pagingTemplate:e.opts.pagingTemplate,limitList:e.opts.limitList,limit:e.opts.limit,callbacks:{fireLoad:$.proxy(e.proxyLoad,e)}})},load:function(){var t=this;t.paging.load()},proxyLoad:function(t){var i=this,a=i.getCondition();a=$.extend({},a,t||{}),e.invoke({url:i.opts.urls.read,data:a,beforeSend:function(){i.$gridPanel.block({css:{border:"none",width:50,height:50,background:"transparent"},message:i.$blockMsg}),"function"==typeof i.opts.callbacks.beforeSend&&i.opts.callbacks.beforeSend.call(i,a)},complete:function(){i.$gridPanel.unblock(),"function"==typeof i.opts.callbacks.complete&&i.opts.callbacks.complete.call(i)},success:function(t){i.render(t)},failed:function(t){alert(t.reason)}})},reload:function(t){var e=this;e.paging.reload(t)},render:function(t){var e,a=this;a.data=t,"function"==typeof a.opts.callbacks.beforeRender&&a.opts.callbacks.beforeRender.call(a,a.data),e=i.render(a.template,{Data:t.data}),a.$gBody.html(e),a.paging.render(t),a.afterRender()},afterRender:function(){var t=this;"function"==typeof t.opts.callbacks.afterRender&&t.opts.callbacks.afterRender.call(t,t.data)},save:function(){var t=this,e=t.$edit.prop("model");e&&t[e.name].call(t,t.$edit)},update:function(t){var i=this,a=t.selectedAllAppointScope();e.invoke({url:i.opts.urls.update,contentType:"application/json",data:JSON.stringify(a),success:function(t){t.msg?"function"===$.type(i.opts.callbacks.operatorError)&&i.opts.callbacks.operatorError.call(i,"update",t.msg):(i.load(),i.showTipSuccess("更新成功!"))},failed:function(t){alert(t.reason)}})},create:function(t){var i=this,a=t.selectedAllAppointScope();e.invoke({url:i.opts.urls.create,contentType:"application/json",data:JSON.stringify(a),success:function(t){t.msg?"function"===$.type(i.opts.callbacks.operatorError)&&i.opts.callbacks.operatorError.call(i,"create",t.msg):(i.load(),i.showTipSuccess("创建成功!"))},failed:function(t){alert(t.reason)}})},destroy:function(){var t=this,i=t.$modalConfirm.data("ids");$.isEmptyObject(i)||e.invoke({url:t.opts.urls.destroy,contentType:"application/json",data:JSON.stringify(i),success:function(e){e.msg?"function"===$.type(t.opts.callbacks.operatorError)&&t.opts.callbacks.operatorError.call(t,"destroy",e.msg):(t.load(),t.showTipSuccess("删除成功!"))},failed:function(t){alert(t.reason)}})},getCondition:function(){var t=this,e=t.$filter.selectedAllAppointScope();return e},showTipSuccess:function(t){var e=this;e.$modalConfirm.modal("hide"),e.$edit.modal("hide"),t&&e.$modalAlert.modal("show").find("[data-field='tip_info']").html(t)},toggleActive:function(t){t.siblings(".bg-active").removeClass("bg-active").end().addClass("bg-active")},log:function(t){window.console&&window.console.log&&window.console.log(t)}},n}),function(t){"use strict";"function"==typeof define&&define.amd?define("jqform",["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function i(e){var i=e.target,a=t(i);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;i=n[0]}var o=this;if(o.clk=i,"image"==i.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=a.offset();o.clk_x=e.pageX-s.left,o.clk_y=e.pageY-s.top}else o.clk_x=e.pageX-i.offsetLeft,o.clk_y=e.pageY-i.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function a(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var n={};n.fileapi=void 0!==t("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function i(i){var a,n,o=t.param(i,e.traditional).split("&"),s=o.length,r=[];for(a=0;s>a;a++)o[a]=o[a].replace(/\+/g," "),n=o[a].split("="),r.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return r}function s(a){for(var n=new FormData,o=0;o<a.length;o++)n.append(a[o].name,a[o].value);if(e.extraData){var s=i(e.extraData);for(o=0;o<s.length;o++)s[o]&&n.append(s[o][0],s[o][1])}e.data=null;var r=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(r.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(t){var i=0,a=t.loaded||t.position,n=t.total;t.lengthComputable&&(i=Math.ceil(a/n*100)),e.uploadProgress(t,a,n,i)},!1),i}),r.data=null;var c=r.beforeSend;return r.beforeSend=function(t,i){e.formData?i.data=e.formData:i.data=n,c&&c.call(this,t,i)},t.ajax(r)}function r(i){function n(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(i){a("cannot get iframe.contentWindow document: "+i)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){a("cannot get iframe.contentDocument: "+i),e=t.document}return e}function s(){function e(){try{var t=n(v).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(i){a("Server abort: ",i," (",i.name,")"),r(I),k&&clearTimeout(k),k=void 0}}var i=u.attr2("target"),o=u.attr2("action"),s="multipart/form-data",c=u.attr("enctype")||u.attr("encoding")||s;_.setAttribute("target",f),(!l||/post/i.test(l))&&_.setAttribute("method","POST"),o!=h.url&&_.setAttribute("action",h.url),h.skipEncodingOverride||l&&!/post/i.test(l)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(k=setTimeout(function(){x=!0,r(C)},h.timeout));var d=[];try{if(h.extraData)for(var p in h.extraData)h.extraData.hasOwnProperty(p)&&(t.isPlainObject(h.extraData[p])&&h.extraData[p].hasOwnProperty("name")&&h.extraData[p].hasOwnProperty("value")?d.push(t('<input type="hidden" name="'+h.extraData[p].name+'">').val(h.extraData[p].value).appendTo(_)[0]):d.push(t('<input type="hidden" name="'+p+'">').val(h.extraData[p]).appendTo(_)[0]));h.iframeTarget||b.appendTo("body"),v.attachEvent?v.attachEvent("onload",r):v.addEventListener("load",r,!1),setTimeout(e,15);try{_.submit()}catch(m){var g=document.createElement("form").submit;g.apply(_)}}finally{_.setAttribute("action",o),_.setAttribute("enctype",c),i?_.setAttribute("target",i):u.removeAttr("target"),t(d).remove()}}function r(e){if(!g.aborted&&!P){if(E=n(v),E||(a("cannot access response document"),e=I),e===C&&g)return g.abort("timeout"),void T.reject(g,"timeout");if(e==I&&g)return g.abort("server abort"),void T.reject(g,"error","server abort");if(E&&E.location.href!=h.iframeSrc||x){v.detachEvent?v.detachEvent("onload",r):v.removeEventListener("load",r,!1);var i,o="success";try{if(x)throw"timeout";var s="xml"==h.dataType||E.XMLDocument||t.isXMLDoc(E);if(a("isXml="+s),!s&&window.opera&&(null===E.body||!E.body.innerHTML)&&--U)return a("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var l=E.body?E.body:E.documentElement;g.responseText=l?l.innerHTML:null,g.responseXML=E.XMLDocument?E.XMLDocument:E,s&&(h.dataType="xml"),g.getResponseHeader=function(t){var e={"content-type":h.dataType};return e[t.toLowerCase()]},l&&(g.status=Number(l.getAttribute("status"))||g.status,g.statusText=l.getAttribute("statusText")||g.statusText);var c=(h.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||h.textarea){var u=E.getElementsByTagName("textarea")[0];if(u)g.responseText=u.value,g.status=Number(u.getAttribute("status"))||g.status,g.statusText=u.getAttribute("statusText")||g.statusText;else if(d){var f=E.getElementsByTagName("pre")[0],m=E.getElementsByTagName("body")[0];f?g.responseText=f.textContent?f.textContent:f.innerText:m&&(g.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==c&&!g.responseXML&&g.responseText&&(g.responseXML=D(g.responseText));try{A=M(g,c,h)}catch(y){o="parsererror",g.error=i=y||o}}catch(y){a("error caught: ",y),o="error",g.error=i=y||o}g.aborted&&(a("upload aborted"),o=null),g.status&&(o=g.status>=200&&g.status<300||304===g.status?"success":"error"),"success"===o?(h.success&&h.success.call(h.context,A,"success",g),T.resolve(g.responseText,"success",g),p&&t.event.trigger("ajaxSuccess",[g,h])):o&&(void 0===i&&(i=g.statusText),h.error&&h.error.call(h.context,g,o,i),T.reject(g,"error",i),p&&t.event.trigger("ajaxError",[g,h,i])),p&&t.event.trigger("ajaxComplete",[g,h]),p&&!--t.active&&t.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,g,o),P=!0,h.timeout&&clearTimeout(k),setTimeout(function(){h.iframeTarget?b.attr("src",h.iframeSrc):b.remove(),g.responseXML=null},100)}}}var c,d,h,p,f,b,v,g,y,w,x,k,_=u[0],T=t.Deferred();if(T.abort=function(t){g.abort(t)},i)for(d=0;d<m.length;d++)c=t(m[d]),o?c.prop("disabled",!1):c.removeAttr("disabled");if(h=t.extend(!0,{},t.ajaxSettings,e),h.context=h.context||h,f="jqFormIO"+(new Date).getTime(),h.iframeTarget?(b=t(h.iframeTarget),w=b.attr2("name"),w?f=w:b.attr2("name",f)):(b=t('<iframe name="'+f+'" src="'+h.iframeSrc+'" />'),b.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=b[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";a("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(n){}b.attr("src",h.iframeSrc),g.error=i,h.error&&h.error.call(h.context,g,i,e),p&&t.event.trigger("ajaxError",[g,h,i]),h.complete&&h.complete.call(h.context,g,i)}},p=h.global,p&&0===t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[g,h]),h.beforeSend&&h.beforeSend.call(h.context,g,h)===!1)return h.global&&t.active--,T.reject(),T;if(g.aborted)return T.reject(),T;y=_.clk,y&&(w=y.name,w&&!y.disabled&&(h.extraData=h.extraData||{},h.extraData[w]=y.value,"image"==y.type&&(h.extraData[w+".x"]=_.clk_x,h.extraData[w+".y"]=_.clk_y)));var C=1,I=2,S=t("meta[name=csrf-token]").attr("content"),$=t("meta[name=csrf-param]").attr("content");$&&S&&(h.extraData=h.extraData||{},h.extraData[$]=S),h.forceSync?s():setTimeout(s,10);var A,E,P,U=50,D=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},j=t.parseJSON||function(t){return window.eval("("+t+")")},M=function(e,i,a){var n=e.getResponseHeader("content-type")||"",o="xml"===i||!i&&n.indexOf("xml")>=0,s=o?e.responseXML:e.responseText;return o&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),a&&a.dataFilter&&(s=a.dataFilter(s,i)),"string"==typeof s&&("json"===i||!i&&n.indexOf("json")>=0?s=j(s):("script"===i||!i&&n.indexOf("javascript")>=0)&&t.globalEval(s)),s};return T}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,d,u=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),c=e.url||this.attr2("action"),d="string"==typeof c?t.trim(c):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:d,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var h={};if(this.trigger("form-pre-serialize",[this,e,h]),h.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var f,m=[],b=this.formToArray(e.semantic,m);if(e.data&&(e.extraData=e.data,f=t.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(b,this,e)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[b,this,e,h]),h.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(b,p);f&&(v=v?v+"&"+f:f),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+v,e.data=null):e.data=v;var g=[];if(e.resetForm&&g.push(function(){u.resetForm()}),e.clearForm&&g.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};g.push(function(i){var a=e.replaceTarget?"replaceWith":"html";t(e.target)[a](i).each(y,arguments)})}else e.success&&g.push(e.success);if(e.success=function(t,i,a){for(var n=e.context||this,o=0,s=g.length;s>o;o++)g[o].apply(n,[t,i,a||u,u])},e.error){var w=e.error;e.error=function(t,i,a){var n=e.context||this;w.apply(n,[t,i,a,u])}}if(e.complete){var x=e.complete;e.complete=function(t,i){var a=e.context||this;x.apply(a,[t,i,u])}}var k=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),_=k.length>0,T="multipart/form-data",C=u.attr("enctype")==T||u.attr("encoding")==T,I=n.fileapi&&n.formdata;a("fileAPI :"+I);var S,$=(_||C)&&!I;e.iframe!==!1&&(e.iframe||$)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){S=r(b)}):S=r(b):S=(_||C)&&I?s(b):t.ajax(e),u.removeData("jqxhr").data("jqxhr",S);for(var A=0;A<m.length;A++)m[A]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&t.isFunction(t.fn.on),!n.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(a("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return n.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,n,e).on("click.form-plugin",this.selector,n,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,e).bind("click.form-plugin",n,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i){var a=[];if(0===this.length)return a;var o,s=this[0],r=this.attr("id"),l=e?s.getElementsByTagName("*"):s.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),r&&(o=t(":input[form="+r+"]").get(),o.length&&(l=(l||[]).concat(o))),!l||!l.length)return a;var c,d,u,h,p,f,m;for(c=0,f=l.length;f>c;c++)if(p=l[c],u=p.name,u&&!p.disabled)if(e&&s.clk&&"image"==p.type)s.clk==p&&(a.push({name:u,value:t(p).val(),type:p.type}),a.push({name:u+".x",value:s.clk_x},{name:u+".y",value:s.clk_y}));else if(h=t.fieldValue(p,!0),h&&h.constructor==Array)for(i&&i.push(p),d=0,m=h.length;m>d;d++)a.push({name:u,value:h[d]});else if(n.fileapi&&"file"==p.type){i&&i.push(p);var b=p.files;if(b.length)for(d=0;d<b.length;d++)a.push({name:u,value:b[d],type:p.type});else a.push({name:u,value:"",type:p.type})}else null!==h&&"undefined"!=typeof h&&(i&&i.push(p),a.push({name:u,value:h,type:p.type,required:p.required}));if(!e&&s.clk){var v=t(s.clk),g=v[0];u=g.name,u&&!g.disabled&&"image"==g.type&&(a.push({name:u,value:v.val()}),a.push({name:u+".x",value:s.clk_x},{name:u+".y",value:s.clk_y}))}return a},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var a=this.name;if(a){var n=t.fieldValue(this,e);if(n&&n.constructor==Array)for(var o=0,s=n.length;s>o;o++)i.push({name:a,value:n[o]});else null!==n&&"undefined"!=typeof n&&i.push({name:this.name,value:n})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],a=0,n=this.length;n>a;a++){var o=this[a],s=t.fieldValue(o,e);null===s||"undefined"==typeof s||s.constructor==Array&&!s.length||(s.constructor==Array?t.merge(i,s):i.push(s))}return i},t.fieldValue=function(e,i){var a=e.name,n=e.type,o=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!a||e.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!e.checked||("submit"==n||"image"==n)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var s=e.selectedIndex;if(0>s)return null;for(var r=[],l=e.options,c="select-one"==n,d=c?s+1:l.length,u=c?s:0;d>u;u++){var h=l[u];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return p;r.push(p)}}return r}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();i.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(a)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var a=t(this).parent("select");e&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),Fader=function(t){this.element=t.element,this.elementID=t.elementID,this.style=t.style,this.num=t.num,this.maxMove=t.maxMove,this.finishNum="string",this.interval=t.interval||10,this.step=t.step||20,this.onFinish=t.onFinish,this.isFinish=!1,this.timer=null,this.method=this.num>=0,this.c=this.elementID?$("#"+this.elementID):this.element,this.run=function(){if(clearInterval(this.timer),this.fade(),this.isFinish)this.onFinish&&this.onFinish();else{var t=this;this.timer=setInterval(function(){t.run()},this.interval)}},this.fade=function(){"string"==this.finishNum&&(this.finishNum=(parseInt(this.c.css(this.style))||0)+this.num);var t=parseInt(this.c.css(this.style))||0;this.finishNum>t&&this.method?(t+=this.step,t>=0&&(this.finishNum=t=0)):this.finishNum<t&&!this.method&&(t-=this.step,-1*t>=this.maxMove&&(this.finishNum=t=-1*this.maxMove)),this.finishNum<=t&&this.method||this.finishNum>=t&&!this.method?(this.c.css(this.style,this.finishNum+"px"),this.isFinish=!0,this.finishNum="string"):this.c.css(this.style,t+"px")}},define("fader",function(){}),TabPanel=function(t){this.renderTo=t.renderTo||$(document.body),this.border=t.border,this.render="string"==typeof this.renderTo?$("#"+this.renderTo):this.renderTo,this.widthResizable=t.widthResizable,this.heightResizable=t.heightResizable,this.autoResizable=t.autoResizable?!0:!1,this.width=t.width||"100%",this.height=t.height||"100%",this.items=t.items,this.active=t.active||0,this.tabs=[],this.scrolled=!1,this.tabWidth=135,this.fixNum=2,this.scrollFinish=!0,this.maxLength=t.maxLength||-1,this.maxzindex=0,this.callbacks=t.callbacks||{},this.init()},TabPanel.prototype={init:function(){var t=this;this.autoResizable&&(this.widthResizable=this.heightResizable=!0,this.render.css("overflow","hidden"),$(window).resize(function(){window.setTimeout(function(){t.resize()},200)})),this.render.width(this.width),this.render.height(this.height);var e="none"!=this.border?2:0;this.tabpanel=$("<DIV></DIV>"),this.tabpanel.addClass("tabpanel"),this.tabpanel.width(this.render.width()-e),this.tabpanel.height(this.render.height()-e),this.render.append(this.tabpanel),this.tabpanel_tab_content=$("<DIV></DIV>"),this.tabpanel_tab_content.addClass("tabpanel_tab_content"),this.tabpanel_tab_content.appendTo(this.tabpanel),this.tabpanel_left_scroll=$("<DIV></DIV>"),this.tabpanel_left_scroll.bind("click",function(){t.moveLeft()}),this.tabpanel_left_scroll.addClass("tabpanel_left_scroll"),this.tabpanel_left_scroll.addClass("display_none"),this.tabpanel_left_scroll.bind("mouseover",function(){var t=$(this);t.addClass("tabpanel_scroll_over"),t.bind("mouseout",function(){t.unbind("mouseout"),t.removeClass("tabpanel_scroll_over")})}),this.tabpanel_left_scroll.appendTo(this.tabpanel_tab_content),this.tabpanel_right_scroll=$("<DIV></DIV>"),this.tabpanel_right_scroll.bind("click",function(){t.moveRight()}),this.tabpanel_right_scroll.addClass("tabpanel_right_scroll"),this.tabpanel_right_scroll.addClass("display_none"),this.tabpanel_right_scroll.bind("mouseover",function(){var t=$(this);t.addClass("tabpanel_scroll_over"),t.bind("mouseout",function(){t.unbind("mouseout"),t.removeClass("tabpanel_scroll_over")})}),this.tabpanel_right_scroll.appendTo(this.tabpanel_tab_content),this.tabpanel_move_content=$("<DIV></DIV>"),this.tabpanel_move_content.addClass("tabpanel_move_content"),this.tabpanel_move_content.appendTo(this.tabpanel_tab_content),this.tabpanel_mover=$("<UL></UL>"),this.tabpanel_mover.addClass("tabpanel_mover"),this.tabpanel_mover.appendTo(this.tabpanel_move_content),this.tabpanel_tab_spacer=$("<DIV></DIV>"),this.tabpanel_tab_spacer.addClass("tabpanel_tab_spacer"),this.tabpanel_tab_spacer.appendTo(this.tabpanel_tab_content),this.tabpanel_content=$("<DIV></DIV>"),this.tabpanel_content.addClass("tabpanel_content"),this.tabpanel_content.appendTo(this.tabpanel);var i=this.tabpanel.width(),a=this.tabpanel.height();"none"==this.border&&this.tabpanel.css("border","none"),this.tabpanel_tab_content.width(i),this.tabpanel_content.width(i),this.tabpanel_content.height(a-this.tabpanel_tab_content.get(0).offsetHeight),this.update();for(var n=0;n<this.items.length;n++)this.items[n].notExecuteMoveSee=!0,this.addTab(this.items[n]);this.active>=0&&this.show(this.active,!1)},moveLeft:function(){this.scrollFinish&&(this.disableScroll(),this.scrollFinish=!1,Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:this.tabWidth,maxMove:this.maxMove,onFinish:this.useableScroll})),this.run())},moveRight:function(){this.scrollFinish&&(this.disableScroll(),this.scrollFinish=!1,Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:-1*this.tabWidth,maxMove:this.maxMove,onFinish:this.useableScroll})),this.run())},moveToLeft:function(){if(this.scrolled&&this.scrollFinish){this.disableScroll(),this.scrollFinish=!1;var t=-1*parseInt(this.tabpanel_mover.css("marginLeft"));Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:t,maxMove:this.maxMove,interval:20,step:10>t/10?10:t/10,onFinish:this.useableScroll})),this.run()}},moveToRight:function(){if(this.scrolled&&this.scrollFinish){this.disableScroll(),this.scrollFinish=!1;var t=-1*parseInt(this.tabpanel_mover.css("marginLeft")),e=this.tabpanel_mover.children().length*this.tabWidth,i=this.tabpanel_move_content.width(),a=-1*(e-i-t+this.fixNum);Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:a,maxMove:this.maxMove,step:10>-1*a/10?10:-1*a/10,onFinish:this.useableScroll})),this.run()}},moveToSee:function(t){if(this.scrolled){var e,i=this.tabWidth*t,a=parseInt(this.tabpanel_mover.css("marginLeft"));0>=a?(e=-1*(a+i),-1*(e+a)>=this.maxMove?this.moveToRight():(this.disableScroll(),this.scrollFinish=!1,Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:e,maxMove:this.maxMove,step:10>e/10?10:e/10,onFinish:this.useableScroll})),this.run())):(e=-1*(i-a),-1*e>=this.maxMove?this.moveToRight():(this.disableScroll(),this.scrollFinish=!1,Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:e,maxMove:this.maxMove,onFinish:this.useableScroll})),this.run()))}},disableScroll:function(){this.tabpanel_left_scroll.addClass("tabpanel_left_scroll_disabled"),this.tabpanel_left_scroll.attr("disabled",!0),this.tabpanel_right_scroll.addClass("tabpanel_right_scroll_disabled"),this.tabpanel_right_scroll.attr("disabled",!0)},useableScroll:function(){var t=this;this.scrolled&&(0==parseInt(t.tabpanel_mover.css("marginLeft"))?(t.tabpanel_left_scroll.addClass("tabpanel_left_scroll_disabled"),t.tabpanel_left_scroll.attr("disabled",!0),t.tabpanel_right_scroll.removeClass("tabpanel_right_scroll_disabled"),t.tabpanel_right_scroll.removeAttr("disabled")):-1*parseInt(t.tabpanel_mover.css("marginLeft"))==t.maxMove?(t.tabpanel_left_scroll.removeClass("tabpanel_left_scroll_disabled"),t.tabpanel_left_scroll.removeAttr("disabled",!0),t.tabpanel_right_scroll.addClass("tabpanel_right_scroll_disabled"),t.tabpanel_right_scroll.attr("disabled")):(t.tabpanel_left_scroll.removeClass("tabpanel_left_scroll_disabled"),t.tabpanel_left_scroll.removeAttr("disabled",!0),t.tabpanel_right_scroll.removeClass("tabpanel_right_scroll_disabled"),t.tabpanel_right_scroll.removeAttr("disabled"))),t.scrollFinish=!0},update:function(){var t=this.tabpanel_tab_content.width();this.scrolled&&(t-=this.tabpanel_left_scroll.width()+this.tabpanel_right_scroll.width()),this.tabpanel_move_content.width(t),this.maxMove=this.tabpanel_mover.children().length*this.tabWidth-t+this.fixNum},showScroll:function(){var t=this.tabpanel_mover.children().length*this.tabWidth,e=this.tabpanel_tab_content.width();t>e&&!this.scrolled?(this.tabpanel_move_content.addClass("tabpanel_move_content_scroll"),this.tabpanel_left_scroll.removeClass("display_none"),this.tabpanel_right_scroll.removeClass("display_none"),this.scrolled=!0):e>t&&this.scrolled&&(this.moveToLeft(),this.tabpanel_move_content.removeClass("tabpanel_move_content_scroll"),this.tabpanel_left_scroll.addClass("display_none"),this.tabpanel_right_scroll.addClass("display_none"),this.scrolled=!1,this.scrollFinish=!0)},addTab:function(t){if(-1!=this.maxLength&&this.maxLength<=this.tabs.length)return!1;if(t.id=t.id||Math.uuid(),$("#"+t.id).length>0)for(var e=0;e<this.tabs.length;e++){var i=this.tabs[e];if(i.id===t.id){this.show(e,!1);break}}else if(this.scrollFinish){var a=this,n=$("<LI></LI>");n.attr("id",t.id),n.appendTo(this.tabpanel_mover);var o=$("<DIV></DIV>");o.text(t.title),o.appendTo(n);var s=0==t.closable?0:10;t.icon?(o.addClass("icon_title"),o.css("background-image",'url("'+t.icon+'")'),o.width()>this.tabWidth-35-s&&(o.width(this.tabWidth-50-s),o.attr("title",t.title),n.append("<DIV>...</DIV>"))):(o.addClass("title").attr("title",t.title),o.width()>this.tabWidth-19-s&&(o.width(this.tabWidth-32-s),n.append("<DIV>...</DIV>")));var r=$("<DIV></DIV>");r.addClass("closer"),r.attr("title","Close tab"),r.appendTo(n);var l=$("<DIV></DIV>");l.addClass("html_content"),l.appendTo(this.tabpanel_content);var c=(l.find("iframe"),this.tabpanel_mover.children().index(this.tabpanel_mover.find(".active")[0]));0>c&&(c=0),this.tabs.length>c?t.preTabId=this.tabs[c].id:t.preTabId="",t.tab=n,t.title=o,t.closer=r,t.content=l,t.disable=void 0==t.disable?!1:t.disable,t.closable=void 0==t.closable?!0:t.closable,0==t.closable&&r.addClass("display_none"),1==t.disabled&&(n.attr("disabled",!0),o.addClass(".disabled")),this.tabs.push(t),n.bind("click",function(t){return function(){a.show(t,!1),a.callbacks.click&&a.callbacks.click.apply(null,[t])}}(this.tabs.length-1)),r.bind("click",function(t){return function(){a.kill(t)}}(this.tabs.length-1)),t.closable,t.lazyload||this.show(this.tabs.length-1,t.notExecuteMoveSee),this.showScroll(),this.update(),t.lazyload||t.notExecuteMoveSee||this.moveToRight()}},getTabPosision:function(t){if("string"==typeof t)for(var e=0;e<this.tabs.length;e++)if(t==this.tabs[e].id){t=e;break}return t},refresh:function(t){if(t=this.getTabPosision(t),"string"==typeof t)return!1;var e=this.tabs[t].content.find("iframe");if(e.length>0){var i=this.tabs[t].id+"Frame";this.iterateFlush(window.frames[i])}},iterateFlush:function(t){if(t.window.frames.length>0)for(var e=0;e<t.window.frames.length;e++)this.iterateFlush(t.window.frames[e]);else if(t.document.forms.length>0)for(var e=0;e<t.document.forms.length;e++)try{t.document.forms[e].submit()}catch(i){t.location.reload()}else t.location.reload()},show:function(t,e){return this.tabs.length<1?!1:(t=this.getTabPosision(t),"string"==typeof t&&(t=0),void(this.scrollFinish&&(t>=this.tabs.length&&(t=0),this.tabs[t].content.css("z-index",++this.maxzindex),this.tabs[t].tab.hasClass("active")?e||this.moveToSee(t):(""==this.tabs[t].content.html()&&this.tabs[t].content.html(this.tabs[t].html),this.tabpanel_mover.find(".active").removeClass("active"),this.tabs[t].tab.addClass("active"),e||this.moveToSee(t)))))},kill:function(t){var e=this;t=this.getTabPosision(t);var i=this.tabs[t].preTabId,a=this.tabs[t];this.tabs[t].closer.remove(),this.tabs[t].title.remove(),this.tabs[t].tab.remove(),this.tabs[t].content.remove(),this.tabs.splice(t,1);for(var n=0;n<this.tabs.length;n++)this.tabs[n].tab.unbind("click"),this.tabs[n].tab.bind("click",function(t){return function(){e.show(t,!1),e.callbacks.click&&e.callbacks.click.apply(null,[t])}}(n)),this.tabs[n].closer.unbind("click"),this.tabs[n].closer.bind("click",function(t){return function(){e.kill(t)}}(n)),this.tabs[n].closable&&(this.tabs[n].tab.unbind("dblclick"),this.tabs[n].tab.bind("dblclick",function(t){return function(){e.kill(t)}}(n)));this.update(),this.showScroll(),this.show(i,!1),"undefined"!=typeof a.closed&&a.closed(a)},getTabsCount:function(){return this.tabs.length},setTitle:function(t,e){t=this.getTabPosision(t),t<this.tabs.length&&this.tabs[t].title.text(e)},getTitle:function(t){return t=this.getTabPosision(t),this.tabs[t].title.text()},setContent:function(t,e){t=this.getTabPosision(t),t<this.tabs.length&&this.tabs[t].content.html(e)},getContent:function(t){return t=this.getTabPosision(t),this.tabs[t].content.html()},setDisable:function(t,e){t=this.getTabPosision(t),t<this.tabs.length&&(this.tabs[t].disable=e,e?(this.tabs[t].tab.attr("disabled",!0),this.tabs[t].title.addClass(".disabled")):(this.tabs[t].tab.removeAttr("disabled"),this.tabs[t].title.removeClass(".disabled")))},getDisable:function(t){return t=this.getTabPosision(t),this.tabs[t].disable},setClosable:function(t,e){t=this.getTabPosision(t),t<this.tabs.length&&(this.tabs[t].closable=e,e?this.tabs[t].closer.addClass("display_none"):(this.tabs[t].closer.addClass("closer"),this.tabs[t].closer.removeClass("display_none")));
},getClosable:function(t){return t=this.getTabPosision(t),this.tabs[t].closable},getActiveIndex:function(){return this.tabpanel_mover.children().index(this.tabpanel_mover.find(".active")[0])},getActiveTab:function(){var t=this.tabpanel_mover.children().index(this.tabpanel_mover.find(".active")[0]);return this.tabs.length>t?this.tabs[t]:null},resize:function(){var t="none"==this.border?0:2;this.widthResizable&&(this.width=this.render.width(),this.tabpanel.width(this.width-t),this.tabpanel_tab_content.width(this.width-t),this.tabpanel_content.width(this.width-t)),this.heightResizable&&(this.height=this.render.height(),this.tabpanel.height(this.height-t),this.tabpanel_content.height(this.height-this.tabpanel_tab_content.get(0).offsetHeight)),this.showScroll(),this.useableScroll(),this.update();var e=this;setTimeout(function(){e.moveToSee(e.getActiveIndex())},200)},setRenderWH:function(t){t&&(void 0!=t.width&&this.render.width(t.width),void 0!=t.height&&this.render.height(t.height),this.resize())}},define("tabPanel",function(){}),define("domReady",[],function(){"use strict";function t(t){var e;for(e=0;e<t.length;e+=1)t[e](c)}function e(){var e=d;l&&e.length&&(d=[],t(e))}function i(){l||(l=!0,s&&clearInterval(s),e())}function a(t){return l?t(c):d.push(t),a}var n,o,s,r="undefined"!=typeof window&&window.document,l=!r,c=r?document:null,d=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),o=document.createElement("div");try{n=null===window.frameElement}catch(u){}o.doScroll&&n&&window.external&&(s=setInterval(function(){try{o.doScroll(),i()}catch(t){}},30))}"complete"===document.readyState&&i()}return a.version="2.0.1",a.load=function(t,e,i,n){n.isBuild?i(null):a(i)},a}),require(["ajax","globalConfig","mustache","grid","jqExtend","jqform","fader","tabPanel","blockUI","jquery","bootstrap","domReady!"],function(t,e,i,a){var n=function(){this.init()};n.prototype={init:function(){var t=this;t.buildDom(),t.bindEvent(),t.initComponent()},buildDom:function(){var t=this;t.$filtersScope=$("#filters_scope"),t.$editPanel=$("#modal_edit"),t.$edit=t.$editPanel.children(),t.$btnUpload=t.$edit.find("[data-action='upload_photo']"),t.$photo=t.$edit.find("[data-field='file']"),t.$isFocus=$("#focus_photo"),t.$progressPhoto=t.$edit.find("[data-field='progress_photo']"),t.$uploadForm=$("#uploadPhoto"),t.$dropdownSort=$("#sort_photo"),t.dropdownTemplate=$("#sort_photo_template").html(),t.timer=null,t.dataSort={}},bindEvent:function(){var t=this,i=$.ajaxSettings.xhr().upload;t.$uploadForm.ajaxForm({url:e.paths.uploadPhoto,resetForm:!1,type:"POST",dataType:"json",beforeSend:function(){t.$edit.block({css:{border:"none",left:"50%",width:50,height:50,background:"transparent"},message:$.initBlockMsg()}),t.$progressPhoto.show().children().css({width:0}),i||t.listenerUpload()},uploadProgress:function(e,i,a,n){var o=n+"%";t.$progressPhoto.children().css({width:o}).html(o)},complete:function(){t.$progressPhoto.hide()},success:function(e){var i="/"+e[0].imgguid;t.$edit.unblock(),t.$photo.attr("src",i),t.$edit.find("[data-field='imgguid']").val(e[0].imgguid),$("#global_search").val(e[0].imgguid)}}),t.$btnUpload.on({click:function(){$(this).val("")},change:function(e){var i=new RegExp(/\\(\w+\.\w+)$/),a=this.files&&this.files[0].name||$(this).val().match(i)[1];t.$edit.find("[data-field='filename']").val(a),t.$uploadForm.submit()}})},initComponent:function(){var t=this;t.grid=new a({gridPanel:"gridpanel",filter:"filters_scope",grid:"user_list",gBody:"tbody_user",template:"tbody_user_template",edit:"modal_edit",limitList:10,limit:5,callbacks:{beforeSend:null,beforeRender:null,afterRender:function(e){t.dataSort=$.map(e.data,function(t,e){return[e]}),t.loadSort()},complete:null,beforeModalShown:function(e,i,a){if("update"===i){var n="/data/photo/"+a.imgguid;(1==a.isFocusPhoto||"true"==a.isFocusPhoto)&&(n="/data/focus/"+a.imgguid),e.$edit.find("img[data-field='file']").attr("src",a&&n)}t.loadSort(i,a)},afterModalHidden:function(){},operatorError:function(t,e){switch(t){case"create":$.messageAlert(e);break;case"update":$.messageAlert(e);break;case"destroy":}}},paging:"paging",pagingTemplate:"paging_template",urls:{read:e.paths.loadPhoto,create:e.paths.insertPhoto,update:e.paths.updatePhoto,destroy:e.paths.destroyPhoto},operator:{addBtn:"addModal"},modalConfirm:"modal_confirm",modalAlert:"modal_alert"}),t.grid.load()},loadSort:function(i,a){var n=this;t.invoke({type:"POST",url:e.paths.loadPhoto,success:function(t){n.renderSort(i,a,t)},failed:function(t){alert(t.reason)}})},renderSort:function(t,e,a){var n,o=this,s=[],r=o.$dropdownSort.siblings("button");$.each(a.data,function(t,e){s.push(e.sort)}),$.uniqueArr(s),0==s.length&&s.push(1),a.maxSort=s[s.length-1]+1,a.data=s,n=i.render(o.dropdownTemplate,{Data:a}),o.$dropdownSort.html(n);var l=o.$dropdownSort.children().first().children().html();"create"==t&&r.find("[data-val='val']").html(l),"update"==t&&(r.find("[data-val='val']").html(e.sort),r.find("[data-field='sort']").html(e.sort))},listenerUpload:function(){var i=this;t.invoke({type:"POST",url:e.paths.getFileProgess,data:{uploadFile:"photo"},success:function(t){100==t.progress?(i.$progressPhoto.hide(),clearTimeout(i.timer)):i.timer=setTimeout(function(){i.listenerUpload()},500),i.$progressPhoto.children().css({width:t.progress+"%"}).html(t.progress+"%")},failed:function(t){alert(t.reason)}})}},new n}),define("app/photo/main.js",function(){});